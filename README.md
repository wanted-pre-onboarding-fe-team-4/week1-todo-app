# ì›í‹°ë“œ ì¸í„´ì‹­ í”„ë¡ íŠ¸ì—”ë“œ 4íŒ€ - 1ì£¼ì°¨ ê³¼ì œ
## ğŸ“– ê³¼ì œ ì„¤ëª…
**ë™ë£Œí•™ìŠµ**ì„ í†µí•´ì„œ íŒ€ì—ì„œ ìƒê°í•œ [ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© í”„ë¡ íŠ¸ì—”ë“œ ì¸í„´ì‹­ ì„ ë°œ ê³¼ì œ - Todo App](https://github.com/walking-sunset/selection-task)ì˜ `Best Pratice` ë§Œë“¤ê¸°
- `Best Practice`ë€ ëª¨ë²”ì‚¬ë¡€ë¼ëŠ” ë§ë¡œì„œ, íŠ¹ì • ë¬¸ì œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í•´ê²°í•˜ê¸° ìœ„í•œ ê°€ì¥ ì„±ê³µì ì¸ í•´ê²°ì±… ë˜ëŠ” ë°©ë²•ë¡ ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

## ğŸ”— ë°°í¬ë§í¬
[ğŸ”— ë°°í¬ ë§í¬ ì´ë™](https://week1-todo-app.vercel.app/)

## ğŸ§‘â€ğŸ’» íŒ€ì› ì†Œê°œ
<table>
  <tbody>
    <tr>
      <td align="center"><a href="https://github.com/SongNoin"><img src="https://avatars.githubusercontent.com/u/88178866?v=4" width="100px; alt=""/><br /><sub><b>ì†¡ê²½í™˜(íŒ€ì¥)</b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/sehyeon4687"><img src="https://avatars.githubusercontent.com/u/104138055?v=4" width="100px;" alt=""/><br /><sub><b>ë°•ì„¸í˜„ </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/ws8313"><img src="https://avatars.githubusercontent.com/u/87023889?v=4" width="100px;" alt=""/><br /><sub><b>ê¹€ìš°ì„± </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/chanwoo00106"><img src="https://avatars.githubusercontent.com/u/57276315?v=4" width="100px;" alt=""/><br /><sub><b>ë³€ì°¬ìš° </b></sub></a><br /></td>
           <tr/>
      <td align="center"><a href="https://github.com/hyemin33"><img src="https://avatars.githubusercontent.com/u/124856203?v=4" width="100px;" alt=""/><br /><sub><b>ì¡°í˜œë¯¼ </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/2taesung"><img src="https://avatars.githubusercontent.com/u/66891085?v=4" width="100px;" alt=""/><br /><sub><b>ì´íƒœì„± </b></sub></a><br /></td>
      <td align="center"><a href="https://github.com/seongbin9786"><img src="https://avatars.githubusercontent.com/u/28754907?v=4" width="100px;" alt=""/><br /><sub><b>ê¹€ì„±ë¹ˆ </b></sub></a><br /></td>
    </tr>
  </tbody>
</table>

## ğŸ’» ì‹¤í–‰ë°©ë²• 
1. ë ˆí¬ì§€í† ë¦¬ í´ë¡ 

   ```bash
   git clone "https://github.com/wanted-pre-onboarding-fe-team-4/week1-todo-app.git"
   ```
2. í”„ë¡œì íŠ¸ í´ë” ì§„ì…

   ```bash
   cd week1-todo-app
   ```

2. module ì„¤ì¹˜

   ```bash
   yarn install
   ```
3. ì•± ì‹¤í–‰
   ```
   npm run start
   ```
## ğŸ“¦ í´ë”êµ¬ì¡°
```
ğŸ“¦ src
â”œâ”€â”€ ğŸ“‚ api
â”‚Â Â  â”œâ”€â”€ ğŸ“„ index.ts
â”‚Â Â  â”œâ”€â”€ ğŸ“„ signInApi.ts
â”‚Â Â  â””â”€â”€ signUpApi.ts
â”œâ”€â”€ ğŸ“‚ components
â”‚   â”œâ”€â”€ ğŸ“‚ Layouts
â”‚   â””â”€â”€ ğŸ“‚ commons // ê³µí†µ ë²„íŠ¼ ë“± ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ ğŸ“‚ context
â”‚Â Â  â””â”€â”€ ğŸ“„ TodoContext.tsx
â”œâ”€â”€ ğŸ“‚ hooks
â”‚Â Â  â”œâ”€â”€ ğŸ“„ index.tsx
â”‚Â Â  â”œâ”€â”€ ğŸ“„ useLoggedIn.tsx
â”‚Â Â  â””â”€â”€ ğŸ“„ useQuery.tsx
â”œâ”€â”€ ğŸ“‚ pages
â”‚Â Â  â”œâ”€â”€ ğŸ“„ NotFound.tsx
â”‚Â Â  â”œâ”€â”€ ğŸ“‚ SignIn
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ğŸ“„ index.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ ğŸ“„ style.tsx
â”‚Â Â  â”œâ”€â”€ ğŸ“‚ SignUp
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ğŸ“„ index.tsx
â”‚Â Â  â”‚Â Â  â””â”€â”€ ğŸ“„ style.tsx
â”‚Â Â  â””â”€â”€ ğŸ“‚ Todo
â”‚Â Â      â”œâ”€â”€ ğŸ“„ index.tsx
â”‚Â Â      â”œâ”€â”€ ğŸ“„ style.tsx
â”‚Â Â      â”œâ”€â”€ ğŸ“„ todo.tsx
â”‚Â Â      â””â”€â”€ ğŸ“„ todoListItem.tsx
â””â”€â”€ ğŸ“‚ types
```
## ğŸ¤“ Best Practice
ê°ìì˜ êµ¬í˜„ë°©ë²•ì„ ì„¤ëª…í•˜ê³  í† ë¡ í–ˆì„ ë•Œ íŒ€ ì•ˆì—ì„œ ì´ ë°©ë²•ì´ ê°€ì¥ íš¨ìœ¨ì ì´ë¼ê³  íŒë‹¨ë˜ëŠ” ê²ƒì„ ì •í•˜ê³  ê·¸ê²ƒì„ íŒ€ì˜ `Best Practice` ë¡œ ì±„íƒí•´ì„œ í”„ë¡œì íŠ¸ì— ë…¹ì˜€ìŠµë‹ˆë‹¤.
### 1. `Git` ê´€ë¦¬
ì½”ë“œ êµ¬í˜„ì€ ì•„ë‹ˆì§€ë§Œ git ê´€ë¦¬ì— ë¶€ì¡±í•œ íŒ€ì›ì´ ë‹¤ìˆ˜ì˜€ìŠµë‹ˆë‹¤. íŒ€ì› ì¤‘ ì‚¬ì „ê³¼ì œì— git ê´€ë¦¬ë¥¼ ì˜í•´ì£¼ì‹  ë¶„ì´ ê³„ì…”ì„œ `Best Practice` ì‚¼ì•„ ë„ì…í•˜ì˜€ìŠµë‹ˆë‹¤.
- Issue ì‘ì„±
- Branch, commit ì»¨ë²¤ì…˜
- [PRì— issue ì—°ê³„](https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword)

### 2. `useQuery` (api query custom hook ê°œë°œ)
- `useQuery custom hook`ì„ ê°œë°œí•˜ì—¬ apië¥¼ ë”°ë¡œ ê°œë°œí•˜ì§€ ì•Šì•„ë„, ì—ëŸ¬í•¸ë“¤ë§, í† í° headersì— ì¶”ê°€ ë“± api ê³µí†µí™”ë¥¼ ì±„íƒí•˜ì˜€ìŠµë‹ˆë‹¤.
- ì±„íƒ ì‚¬ìœ 
  - ë§¤ê°œë³€ìˆ˜ì— method ì™€ urlë§Œ ë„£ì–´ë„ api í˜¸ì¶œì´ ë˜ê¸°ì— **ì½”ë“œì˜ í†µì¼ì„±ê³¼ í˜‘ì—…ì†ë„**ì— í° ë„ì›€ì´ ëœë‹¤ ìƒê°í–ˆìŠµë‹ˆë‹¤.
  - ê³µí†µ ì—ëŸ¬ í•¸ë“¤ë§ì´ ë˜ì–´ìˆì–´ì„œ ì—ëŸ¬í•¸ë“¤ë§ ìˆ˜ì • ì‹œ useQuery ë§Œ ìˆ˜ì •í•´ì£¼ë©´ ë˜ê¸°ì— **ìœ ì§€/ ë³´ìˆ˜**ì— ì¢‹ì•˜ìŠµë‹ˆë‹¤.
  - **í† í° ê°’ ê´€ë¦¬**ë„ useQuery í†µí•´ì„œ ê³µí†µìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
```ts
// ì°¸ê³  íŒŒì¼ - src/api/index.ts
import axios, { isAxiosError } from 'axios'

const baseURL = 'https://pre-onboarding-selection-task.shop'

const API = axios.create({
  baseURL,
})

// api í˜¸ì¶œ ì „ localstorageì— í† í° ì¡´ì¬ ì‹œ Authorizationì— ì¶”ê°€
API.interceptors.request.use(async (config) => {
  const token = localStorage.getItem('access_token')
  if (token) config.headers['Authorization'] = `Bearer ${token}`

  return config
})

// signin í˜¸ì¶œ ì „ í† í°ê°’ localstorageì— ì €ì¥
API.interceptors.response.use(
  (res) => {
    if (res.config.url === '/auth/signin')
      localStorage.setItem('access_token', res.data.access_token)

    return res
  },
  (e) => {
    if (!isAxiosError(e) && e.response?.status === 401) {
      localStorage.removeItem('access_token')
      window.location.replace('/signin')
    }

    return Promise.reject(e)
  }
)

export default API
```

```ts
// ì°¸ê³  íŒŒì¼ - src/hooks/useQuery.tsx
import API from 'api'
...

interface Props<T> {
  url: string
  method: Method
  onSuccess?: (data: T) => void | Promise<void>
  onFailure?: (e: unknown) => void | Promise<void>
  successMessage?: string
  errors?: ErrorsType | string
}

export const useQuery = <T,>({
  url,
  method,
  onSuccess,
  onFailure,
  successMessage,
  errors,
}: Props<T>) => {
  const [isLoading, setIsLoading] = useState<boolean>(false)
  const [data, setData] = useState<T | null>(null)

  const query = useCallback(
    async <Body,>(body?: Body) => {
      setIsLoading(true)

      try {
        const { data } = await API({
          url,
          method,
          data: body,
        })

        if (successMessage) alert(successMessage)

        setData(data)
        if (onSuccess) await onSuccess(data)
      } catch (e) {
        // ê³µí†µ ì—ëŸ¬ í•¸ë“¤ë§
        if (!isAxiosError(e)) return alert('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')

        if (e.response && e.response.status >= 500) {
          alert('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤')
        } else if (typeof errors === 'string') {
          alert(errors)
        } else if (errors && e.response && errors[e.response.status]) {
          alert(errors[e.response.status])
        }

        if (onFailure) await onFailure(e)
      } finally {
        setIsLoading(false)
      }
    },
    [url, method, onSuccess, onFailure, successMessage, errors]
  )

  return { query, isLoading, data }
}
```
- `useQuery` ì‹¤ ì‚¬ìš© ì½”ë“œ
```ts
// ì°¸ê³  íŒŒì¼ - src/pages/Todo/todo.tsx
  ...
  const { query: createTodo } = useQuery({
    method: 'post',
    url: `/todos`,
  })
  ...
   const handleSubmit = async () => {
    await createTodo({ todo: todoText })
    await getTodo()
  }
  ...
```
### 3. `Context API` ì‚¬ìš©
- `Context API` ë¥¼ ì‚¬ìš©í•´ Todo ë¦¬ìŠ¤íŠ¸ì™€ get í•¨ìˆ˜ë¥¼ Todoí˜ì´ì§€ ë‚´ ìƒíƒœê´€ë¦¬ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
- ì±„íƒì‚¬ìœ 
  - Todo í˜ì´ì§€ì—ì„œ post, put, delet ì´í›„ get ì„ ë‹¤ì‹œ í•´ì¤˜ì•¼ í•´ì„œ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ Todo ë¦¬ìŠ¤íŠ¸ì™€ get í•¨ìˆ˜ë¥¼ í•„ìš”í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
  - Prop Drilling ì„ ë§‰ê¸° ìœ„í•´ì„œ todo ë°°ì—´ê³¼ getTodo í•¨ìˆ˜ë¥¼ Context API ë¥¼ ì‚¬ìš©í•´ ìƒíƒœê´€ë¦¬ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
```ts
// ì°¸ê³  íŒŒì¼ - src/context/TodoContext/tsx
import { createContext, Dispatch, SetStateAction } from 'react'
import { ITodo } from 'types/ITodo'

export const TodoContext = createContext<{
  todoData: ITodo[]
  setTodoData: Dispatch<SetStateAction<ITodo[]>>
  getTodo: () => Promise<void>
}>({
  todoData: [],
  setTodoData: () => {
    return
  },
  getTodo: async () => {
    return
  },
})
```
- Todoí˜ì´ì§€ ë‚´ ì‚¬ìš©ì„ ìœ„í•œ Provider ê°ì‹¸ì£¼ê¸°
```ts
// ì°¸ê³  íŒŒì¼ - src/pages/Todo/index.tsx
import { TodoContext } from 'context/TodoContext'
...
export const TodoPage = () => {
  const [todoData, setTodoData] = useState<any>([])

  //todo ë¶ˆëŸ¬ì˜¤ê¸°
  const { query: getTodo, data } = useQuery({
    url: `/todos`,
    method: 'get',
  })
...
  return (
    <TodoContext.Provider value={{ todoData, setTodoData, getTodo }}>
      <Wrapper>
        <Todo />
      </Wrapper>
    </TodoContext.Provider>
  )
}
```
- ì‹¤ ì‚¬ìš©
```ts
// ì°¸ê³  íŒŒì¼ -src/pages/Todo/todo.tsx
...
export const Todo = () => {
  const { todoData, getTodo } = useContext(TodoContext)
  ...
  }
```
## ì½”ë“œ ì»¨ë²¤ì…˜
### commit message

| Type | Description |
| --- | --- |
| test | ëˆ„ë½ëœ í…ŒìŠ¤íŠ¸ ì¶”ê°€ |
| feat | ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ |
| fix | ë²„ê·¸ ìˆ˜ì • |
| chore | ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ë‚˜ ë³´ì¡° ë„êµ¬ ë³€ê²½ |
| docs | ë¬¸ì„œ ë³€ê²½ |
| refactor | ë²„ê·¸ ìˆ˜ì •ë„, ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ë„ ì•„ë‹Œ ì½”ë“œ ë³€ê²½ |
| style | ë§ˆí¬ì—…, ê³µë°±, í¬ë§·, ì„¸ë¯¸ì½œë¡  ëˆ„ë½ ë“± ìŠ¤íƒ€ì¼ ë³€ê²½ |
| ci | CI ê´€ë ¨ ë³€ê²½ |
| perf | ì„±ëŠ¥ ê°œì„  |

### branch

| ë¸Œëœì¹˜ ì´ë¦„ | ì„¤ëª… |
| --- | --- |
| master | ì œí’ˆìœ¼ë¡œ ì¶œì‹œ ê°€ëŠ¥í•œ ë¸Œëœì¹˜ |
| feature/ê°œë°œí•  ë‚´ìš© | ê¸°ëŠ¥ì„ ê°œë°œí•˜ëŠ” ë¸Œëœì¹˜ |
| fix/ìˆ˜ì •í•  ë‚´ìš©  | ì¶œì‹œ ë²„ì „ì—ì„œ ë°œìƒí•œ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ëŠ” ë¸Œëœì¹˜ |
